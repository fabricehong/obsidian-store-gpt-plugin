/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StoreGPTPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/sgBlock.ts
var import_obsidian3 = require("obsidian");

// src/prompt-resolver.ts
var import_obsidian = require("obsidian");

// src/markdown-leveler.ts
function relevelMarkdownHeaders(markdown, targetBaseLevel) {
  const lines = markdown.split("\n");
  let adjustedMarkdown = "";
  let minCurrentLevel = Infinity;
  lines.forEach((line) => {
    const match = line.match(/^(#+)/);
    if (match) {
      const level = match[0].length;
      if (level < minCurrentLevel) {
        minCurrentLevel = level;
      }
    }
  });
  const levelOffset = targetBaseLevel - minCurrentLevel;
  lines.forEach((line) => {
    const match = line.match(/^(#+)(\s+.*)/);
    if (match) {
      let newLevel = match[1].length + levelOffset;
      if (newLevel < 1)
        newLevel = 1;
      if (newLevel > 6) {
        const boldText = `**${newLevel - 6}. ${match[2].trim()}**`;
        adjustedMarkdown += boldText + "\n";
      } else {
        const newHeader = `${"#".repeat(newLevel)}${match[2]}`;
        adjustedMarkdown += newHeader + "\n";
      }
    } else {
      adjustedMarkdown += line + "\n";
    }
  });
  return adjustedMarkdown.trim();
}
function computePlaceHoldersMarkdownLevel(markdown) {
  const lines = markdown.split("\n");
  let currentLevel = 0;
  let result = {};
  lines.forEach((line) => {
    const headerMatch = line.match(/^(#+)/);
    if (headerMatch) {
      currentLevel = headerMatch[0].length;
    }
    const placeholderMatches = [...line.matchAll(new RegExp(PLACEHOLDER_REGEX, "g"))];
    placeholderMatches.forEach((match) => {
      const placeholderName = match[1];
      if (placeholderName && !(placeholderName in result)) {
        result[placeholderName] = currentLevel;
      }
    });
    if (!headerMatch && !line.trim().startsWith("{{")) {
      currentLevel = 0;
    }
  });
  return result;
}

// src/prompt.ts
var PLACEHOLDER_REGEX = "\\{\\{([\\w-]+)\\}\\}";
var Prompt = class {
  constructor(template, filepath, section = void 0) {
    this.template = template;
    this.filepath = filepath;
    this.section = section;
  }
  remplacePlaceholders(variables) {
    const placeholdersLevels = computePlaceHoldersMarkdownLevel(this.template);
    return this.template.replace(new RegExp(PLACEHOLDER_REGEX, "g"), (match, variableName) => {
      if (variables.hasOwnProperty(variableName)) {
        const placeholderLevel = placeholdersLevels[variableName];
        const markdown = variables[variableName];
        return relevelMarkdownHeaders(markdown, placeholderLevel + 1);
      }
      return match;
    });
  }
  isEqual(other) {
    return this.filepath === other.filepath && this.section === other.section;
  }
  getPromptId() {
    return !!this.section ? `${this.filepath}#${this.section}` : this.filepath;
  }
};

// src/sg-block-utils.ts
function getSgBlocContent(content) {
  const regex = /^\s*```sg\n([\s\S]*?)\n```\s*$/;
  const correspondance = content.match(regex);
  if (correspondance) {
    return correspondance[1].trim();
  }
  return void 0;
}
function removeFrontmatter(content) {
  const regex = /^---[\s\S]+?---\n?/;
  return content.replace(regex, "");
}

// src/prompt-resolver.ts
var PromptResolver = class {
  constructor(app, promptHistory = []) {
    this.app = app;
    this.promptHistory = promptHistory;
  }
  async resolvePrompt(prompt, sourceFile) {
    const newPromptHistory = this.promptHistory.concat(prompt);
    if (this.promptHistory.some((p) => p.isEqual(prompt))) {
      const chainDescription = newPromptHistory.map((p) => {
        if (p.isEqual(prompt)) {
          return `*${p.getPromptId()}*`;
        }
        return p.getPromptId();
      }).join(" -> ");
      throw new Error(`Circular reference detected: ${chainDescription}`);
    }
    const file = this.app.vault.getAbstractFileByPath(sourceFile);
    const variables = {};
    if (!(file instanceof import_obsidian.TFile)) {
      throw new Error("no instance of TFile");
    }
    const fileCache = this.app.metadataCache.getFileCache(file);
    if (!fileCache) {
      throw new Error("Aucun cache de fichier trouv\xE9.");
    }
    const frontmatter = fileCache.frontmatter;
    if (!frontmatter) {
      console.log("no frontmatter");
      return prompt.template;
    }
    for (const key in frontmatter) {
      const linktext = frontmatter[key];
      const linkTargetContent = await this.determineVariableValue(linktext, file.path);
      if (!linkTargetContent) {
        variables[key] = linktext;
      } else {
        const withoutFrontmatter = removeFrontmatter(linkTargetContent.content);
        const sgBlock = getSgBlocContent(withoutFrontmatter);
        if (sgBlock) {
          const newPrompt = new Prompt(
            sgBlock,
            linkTargetContent.filepath,
            linkTargetContent.section
          );
          const promptResolver = new PromptResolver(this.app, newPromptHistory);
          variables[key] = await promptResolver.resolvePrompt(newPrompt, linkTargetContent.filepath);
        } else {
          variables[key] = withoutFrontmatter;
        }
      }
    }
    return prompt.remplacePlaceholders(variables);
  }
  async determineVariableValue(linktext, mainfilePath) {
    const { path, subpath } = this.parseLinktext(linktext);
    const destFile = this.app.metadataCache.getFirstLinkpathDest(path, mainfilePath);
    if (!destFile) {
      return void 0;
    }
    const linkedFile = this.app.vault.getAbstractFileByPath(destFile.path);
    if (!(linkedFile instanceof import_obsidian.TFile)) {
      throw new Error("no instance of TFile");
    }
    let content = await this.app.vault.read(linkedFile);
    let result;
    if (subpath) {
      result = this.extractSectionContent(content, subpath);
    } else {
      result = content;
    }
    return {
      content: result,
      filepath: destFile.path,
      section: subpath
    };
  }
  parseLinktext(linktext) {
    const match = linktext.match(/\[\[([^\]]+?)(#([^#]+?))?\]\]/);
    if (match) {
      const linkAndLabel = match[1].split("|");
      return { path: linkAndLabel[0], subpath: match[3] };
    }
    return { path: linktext };
  }
  extractSectionContent(content, subpath) {
    const lines = content.split("\n");
    let sectionContent = "";
    let inSection = false;
    let currentLevel = 0;
    for (const line of lines) {
      const headerMatch = line.match(/^(#+)\s+(.*)/);
      if (headerMatch) {
        const level = headerMatch[1].length;
        const title = headerMatch[2].trim();
        if (inSection && level <= currentLevel) {
          break;
        }
        if (title === subpath) {
          inSection = true;
          currentLevel = level;
          continue;
        }
      }
      if (inSection) {
        sectionContent += line + "\n";
      }
    }
    return sectionContent.trim();
  }
};

// src/CopyPromptModal.ts
var import_obsidian2 = require("obsidian");
var CopyPromptModal = class extends import_obsidian2.Modal {
  constructor(app, prompt, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
    this.prompt = prompt;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Prompt" });
    const textarea = contentEl.createEl("textarea", {
      attr: {
        style: "width: 100%; box-sizing: border-box; margin-bottom: 20px;"
        // Assure que le textarea prend toute la largeur et ajoute un peu d'espace en dessous
      }
    });
    textarea.value = this.prompt;
    textarea.rows = 10;
    const buttonContainer = contentEl.createEl("div", {
      attr: {
        style: "text-align: right;"
        // Alignement du bouton Ã  droite
      }
    });
    const button = buttonContainer.createEl("button", { text: "Submit" });
    button.addClass("mod-cta");
    button.addEventListener("click", () => {
      this.close();
      this.onSubmit(textarea.value);
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// src/sgBlock.ts
var SGBlock = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin.registerMarkdownCodeBlockProcessor(
      "sg",
      async (source, el, ctx) => {
        this.blockTgHandler(source, el, ctx);
      }
    );
  }
  async blockTgHandler(source, container, { sourcePath: path }) {
    setTimeout(async () => {
      const preElement = document.createElement("pre");
      preElement.style.whiteSpace = "pre-wrap";
      const codeElement = document.createElement("code");
      codeElement.textContent = source;
      preElement.appendChild(codeElement);
      container.appendChild(preElement);
      this.addTGMenu(container, source, path);
    }, 100);
  }
  addTGMenu(el, source, sourcePath) {
    var _a;
    const div = document.createElement("div");
    div.classList.add("plug-tg-tgmenu", "plug-tg-flex", "plug-tg-justify-end");
    const generateSVG = `<svg viewBox="0 0 100 100" class="svg-icon GENERATE_ICON"><defs><style>.cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:4px;}</style></defs><g id="Layer_2" data-name="Layer 2"><g id="VECTOR"><rect class="cls-1" x="74.98" y="21.55" width="18.9" height="37.59"></rect><path class="cls-1" d="M38.44,27.66a8,8,0,0,0-8.26,1.89L24.8,34.86a25.44,25.44,0,0,0-6,9.3L14.14,56.83C11.33,64.7,18.53,67.3,21,60.9" transform="translate(-1.93 -15.75)"></path><polyline class="cls-1" points="74.98 25.58 56.61 18.72 46.72 15.45"></polyline><path class="cls-1" d="M55.45,46.06,42.11,49.43,22.76,50.61c-8.27,1.3-5.51,11.67,4.88,12.8L46.5,65.78,53,68.4a23.65,23.65,0,0,0,17.9,0l6-2.46" transform="translate(-1.93 -15.75)"></path><path class="cls-1" d="M37.07,64.58v5.91A3.49,3.49,0,0,1,33.65,74h0a3.49,3.49,0,0,1-3.45-3.52V64.58" transform="translate(-1.93 -15.75)"></path><path class="cls-1" d="M48,66.58v5.68a3.4,3.4,0,0,1-3.34,3.46h0a3.4,3.4,0,0,1-3.34-3.45h0V65.58" transform="translate(-1.93 -15.75)"></path><polyline class="cls-1" points="28.75 48.05 22.66 59.3 13.83 65.61 14.41 54.5 19.11 45.17"></polyline><polyline class="cls-1" points="25.17 34.59 43.75 0.25 52.01 5.04 36.39 33.91"></polyline><line class="cls-1" x1="0.25" y1="66.92" x2="13.83" y2="66.92"></line></g></g></svg>`;
    const button = this.createRunButton("Generate Text", generateSVG);
    button.addEventListener("click", async () => {
      console.log("trigger");
      const promptResolver = new PromptResolver(this.plugin.app);
      let resolvedPrompt = await promptResolver.resolvePrompt(new Prompt(source, sourcePath), sourcePath);
      new CopyPromptModal(this.plugin.app, resolvedPrompt, (result) => {
        this.copyToClipboard(result);
        new import_obsidian3.Notice("Prompt copied to clipboard", 3e3);
      }).open();
    });
    div.appendChild(button);
    (_a = el.parentElement) == null ? void 0 : _a.appendChild(div);
  }
  async copyToClipboard(texte) {
    try {
      await navigator.clipboard.writeText(texte);
      console.log("Texte copi\xE9 dans le presse-papier");
    } catch (err) {
      console.error("Erreur lors de la copie dans le presse-papier", err);
    }
  }
  createRunButton(label, svg) {
    const button = document.createElement("div");
    button.classList.add("clickable-icon");
    button.setAttribute("aria-label", label);
    button.innerHTML = svg;
    return button;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var StoreGPTPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    new SGBlock(this);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NnQmxvY2sudHMiLCAic3JjL3Byb21wdC1yZXNvbHZlci50cyIsICJzcmMvbWFya2Rvd24tbGV2ZWxlci50cyIsICJzcmMvcHJvbXB0LnRzIiwgInNyYy9zZy1ibG9jay11dGlscy50cyIsICJzcmMvQ29weVByb21wdE1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgU0dCbG9jayBmcm9tIFwiLi9zZ0Jsb2NrXCI7XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgU3RvcmVHUFRQbHVnaW5TZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBTdG9yZUdQVFBsdWdpblNldHRpbmdzID0ge1xuXHRteVNldHRpbmc6ICdkZWZhdWx0J1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yZUdQVFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBTdG9yZUdQVFBsdWdpblNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0bmV3IFNHQmxvY2sodGhpcyk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTdG9yZUdQVFBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5pbXBvcnQgeyBQcm9tcHRSZXNvbHZlciB9IGZyb20gXCIuL3Byb21wdC1yZXNvbHZlclwiO1xuaW1wb3J0IHsgQ29weVByb21wdE1vZGFsIH0gZnJvbSBcIi4vQ29weVByb21wdE1vZGFsXCI7XG5pbXBvcnQgeyBQcm9tcHQgfSBmcm9tIFwiLi9wcm9tcHRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU0dCbG9jayB7XG5cdHBsdWdpbjogU3RvcmVHUFRQbHVnaW47XG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogU3RvcmVHUFRQbHVnaW4pIHtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblxuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXG5cdFx0XHRcInNnXCIsXG5cdFx0XHRhc3luYyAoc291cmNlLCBlbCwgY3R4KSA9PiB7XG5cdFx0XHRcdHRoaXMuYmxvY2tUZ0hhbmRsZXIoc291cmNlLCBlbCwgY3R4KTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgYmxvY2tUZ0hhbmRsZXIoXG5cdFx0c291cmNlOiBzdHJpbmcsXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcblx0XHR7IHNvdXJjZVBhdGg6IHBhdGggfTogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dFxuXHQpIHtcblx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHByZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcmUnKTtcblx0XHRcdHByZUVsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7IC8vIEdhcmRlIGxlcyBzYXV0cyBkZSBsaWduZSBldCBlc3BhY2VzXG5cblx0XHRcdC8vIENyXHUwMEU5YXRpb24gZCd1biBcdTAwRTlsXHUwMEU5bWVudCBjb2RlIHF1aSBjb250aWVuZHJhIGxlIHRleHRlXG5cdFx0XHRjb25zdCBjb2RlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvZGUnKTtcblx0XHRcdGNvZGVFbGVtZW50LnRleHRDb250ZW50ID0gc291cmNlOyAvLyBBc3NpZ25lIGxlIGNvbnRlbnUgc291cmNlIFx1MDBFMCBsJ1x1MDBFOWxcdTAwRTltZW50IGNvZGVcblxuXHRcdFx0Ly8gQWpvdXRlIGwnXHUwMEU5bFx1MDBFOW1lbnQgY29kZSBcdTAwRTAgbCdcdTAwRTlsXHUwMEU5bWVudCBwcmVcblx0XHRcdHByZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY29kZUVsZW1lbnQpO1xuXG5cdFx0XHQvLyBBam91dGUgbCdcdTAwRTlsXHUwMEU5bWVudCBwcmUgYXUgY29udGFpbmVyIHBvdXIgbCdhZmZpY2hhZ2Vcblx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtZW50KTtcblxuXHRcdFx0dGhpcy5hZGRUR01lbnUoY29udGFpbmVyLCBzb3VyY2UsIHBhdGgpO1xuXHRcdH0sIDEwMCk7XG5cdH1cblxuXHRwcml2YXRlIGFkZFRHTWVudShcblx0XHRlbDogSFRNTEVsZW1lbnQsXG5cdFx0c291cmNlOiBzdHJpbmcsXG5cdFx0c291cmNlUGF0aDogc3RyaW5nXG5cdCkge1xuXHRcdGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0ZGl2LmNsYXNzTGlzdC5hZGQoXCJwbHVnLXRnLXRnbWVudVwiLCBcInBsdWctdGctZmxleFwiLCBcInBsdWctdGctanVzdGlmeS1lbmRcIik7XG5cdFx0Y29uc3QgZ2VuZXJhdGVTVkcgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiBjbGFzcz1cInN2Zy1pY29uIEdFTkVSQVRFX0lDT05cIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6bm9uZTtzdHJva2U6Y3VycmVudENvbG9yO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NHB4O308L3N0eWxlPjwvZGVmcz48ZyBpZD1cIkxheWVyXzJcIiBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgaWQ9XCJWRUNUT1JcIj48cmVjdCBjbGFzcz1cImNscy0xXCIgeD1cIjc0Ljk4XCIgeT1cIjIxLjU1XCIgd2lkdGg9XCIxOC45XCIgaGVpZ2h0PVwiMzcuNTlcIj48L3JlY3Q+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNMzguNDQsMjcuNjZhOCw4LDAsMCwwLTguMjYsMS44OUwyNC44LDM0Ljg2YTI1LjQ0LDI1LjQ0LDAsMCwwLTYsOS4zTDE0LjE0LDU2LjgzQzExLjMzLDY0LjcsMTguNTMsNjcuMywyMSw2MC45XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0xLjkzIC0xNS43NSlcIj48L3BhdGg+PHBvbHlsaW5lIGNsYXNzPVwiY2xzLTFcIiBwb2ludHM9XCI3NC45OCAyNS41OCA1Ni42MSAxOC43MiA0Ni43MiAxNS40NVwiPjwvcG9seWxpbmU+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNNTUuNDUsNDYuMDYsNDIuMTEsNDkuNDMsMjIuNzYsNTAuNjFjLTguMjcsMS4zLTUuNTEsMTEuNjcsNC44OCwxMi44TDQ2LjUsNjUuNzgsNTMsNjguNGEyMy42NSwyMy42NSwwLDAsMCwxNy45LDBsNi0yLjQ2XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0xLjkzIC0xNS43NSlcIj48L3BhdGg+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNMzcuMDcsNjQuNTh2NS45MUEzLjQ5LDMuNDksMCwwLDEsMzMuNjUsNzRoMGEzLjQ5LDMuNDksMCwwLDEtMy40NS0zLjUyVjY0LjU4XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0xLjkzIC0xNS43NSlcIj48L3BhdGg+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNNDgsNjYuNTh2NS42OGEzLjQsMy40LDAsMCwxLTMuMzQsMy40NmgwYTMuNCwzLjQsMCwwLDEtMy4zNC0zLjQ1aDBWNjUuNThcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoLTEuOTMgLTE1Ljc1KVwiPjwvcGF0aD48cG9seWxpbmUgY2xhc3M9XCJjbHMtMVwiIHBvaW50cz1cIjI4Ljc1IDQ4LjA1IDIyLjY2IDU5LjMgMTMuODMgNjUuNjEgMTQuNDEgNTQuNSAxOS4xMSA0NS4xN1wiPjwvcG9seWxpbmU+PHBvbHlsaW5lIGNsYXNzPVwiY2xzLTFcIiBwb2ludHM9XCIyNS4xNyAzNC41OSA0My43NSAwLjI1IDUyLjAxIDUuMDQgMzYuMzkgMzMuOTFcIj48L3BvbHlsaW5lPjxsaW5lIGNsYXNzPVwiY2xzLTFcIiB4MT1cIjAuMjVcIiB5MT1cIjY2LjkyXCIgeDI9XCIxMy44M1wiIHkyPVwiNjYuOTJcIj48L2xpbmU+PC9nPjwvZz48L3N2Zz5gO1xuXG5cdFx0Y29uc3QgYnV0dG9uID0gdGhpcy5jcmVhdGVSdW5CdXR0b24oXCJHZW5lcmF0ZSBUZXh0XCIsIGdlbmVyYXRlU1ZHKTtcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKCd0cmlnZ2VyJyk7XG5cblx0XHRcdGNvbnN0IHByb21wdFJlc29sdmVyID0gbmV3IFByb21wdFJlc29sdmVyKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0XHRsZXQgcmVzb2x2ZWRQcm9tcHQgPSBhd2FpdCBwcm9tcHRSZXNvbHZlci5yZXNvbHZlUHJvbXB0KG5ldyBQcm9tcHQoc291cmNlLCBzb3VyY2VQYXRoKSwgc291cmNlUGF0aCk7XG5cblx0XHRcdG5ldyBDb3B5UHJvbXB0TW9kYWwodGhpcy5wbHVnaW4uYXBwLCByZXNvbHZlZFByb21wdCwgKHJlc3VsdDogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdHRoaXMuY29weVRvQ2xpcGJvYXJkKHJlc3VsdCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQcm9tcHQgY29waWVkIHRvIGNsaXBib2FyZFwiLCAzMDAwKTtcblx0XHRcdH0pLm9wZW4oKTtcblxuXHRcdH0pO1xuXG5cdFx0ZGl2LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cdFx0ZWwucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQoZGl2KTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY29weVRvQ2xpcGJvYXJkKHRleHRlOiBzdHJpbmcpIHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dGUpO1xuXHRcdFx0Y29uc29sZS5sb2coJ1RleHRlIGNvcGlcdTAwRTkgZGFucyBsZSBwcmVzc2UtcGFwaWVyJyk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSBjb3BpZSBkYW5zIGxlIHByZXNzZS1wYXBpZXInLCBlcnIpO1xuXHRcdH1cblx0fVxuXG5cdGNyZWF0ZVJ1bkJ1dHRvbihsYWJlbDogc3RyaW5nLCBzdmc6IHN0cmluZykge1xuXHRcdGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjbGlja2FibGUtaWNvblwiKTtcblx0XHRidXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBsYWJlbCk7XG5cdFx0Ly9hcmlhLWxhYmVsLXBvc2l0aW9uPVwicmlnaHRcIlxuXHRcdGJ1dHRvbi5pbm5lckhUTUwgPSBzdmc7XG5cblx0XHRyZXR1cm4gYnV0dG9uO1xuXHR9XG5cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBQcm9tcHQgfSBmcm9tIFwiLi9wcm9tcHRcIjtcbmltcG9ydCB7IGdldFNnQmxvY0NvbnRlbnQsIHJlbW92ZUZyb250bWF0dGVyIH0gZnJvbSBcIi4vc2ctYmxvY2stdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFByb21wdFJlc29sdmVyIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBhcHA6IEFwcCwgcHJpdmF0ZSByZWFkb25seSBwcm9tcHRIaXN0b3J5OiBQcm9tcHRbXSA9IFtdKSB7fVxuXG5cdHB1YmxpYyBhc3luYyByZXNvbHZlUHJvbXB0KHByb21wdDogUHJvbXB0LCBzb3VyY2VGaWxlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IG5ld1Byb21wdEhpc3RvcnkgPSB0aGlzLnByb21wdEhpc3RvcnkuY29uY2F0KHByb21wdCk7XG5cblx0XHRpZiAodGhpcy5wcm9tcHRIaXN0b3J5LnNvbWUoKHApID0+IHAuaXNFcXVhbChwcm9tcHQpKSkge1xuXHRcdFx0Y29uc3QgY2hhaW5EZXNjcmlwdGlvbiA9IG5ld1Byb21wdEhpc3RvcnkubWFwKChwKSA9PiB7XG5cdFx0XHRcdGlmIChwLmlzRXF1YWwocHJvbXB0KSkge1xuXHRcdFx0XHRcdHJldHVybiBgKiR7cC5nZXRQcm9tcHRJZCgpfSpgO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBwLmdldFByb21wdElkKCk7XG5cdFx0XHR9KS5qb2luKCcgLT4gJyk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYENpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZDogJHtjaGFpbkRlc2NyaXB0aW9ufWApO1xuXHRcdH1cblx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNvdXJjZUZpbGUpO1xuXHRcdGNvbnN0IHZhcmlhYmxlczoge1trZXk6IHN0cmluZ106IHN0cmluZ30gPSB7fVxuXG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdubyBpbnN0YW5jZSBvZiBURmlsZScpO1xuXHRcdH1cblx0XHQvLyBSXHUwMEU5Y3VwXHUwMEU4cmUgbGUgY2FjaGUgZHUgZmljaGllciBhY3R1ZWwgcG91ciBhY2NcdTAwRTlkZXIgYXUgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblx0XHRpZiAoIWZpbGVDYWNoZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQXVjdW4gY2FjaGUgZGUgZmljaGllciB0cm91dlx1MDBFOS5cIik7XG5cdFx0fVxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gZmlsZUNhY2hlLmZyb250bWF0dGVyO1xuXG5cdFx0aWYgKCFmcm9udG1hdHRlcikge1xuXHRcdFx0Y29uc29sZS5sb2coJ25vIGZyb250bWF0dGVyJyk7XG5cdFx0XHRyZXR1cm4gcHJvbXB0LnRlbXBsYXRlO1xuXHRcdH1cblx0XHRmb3IgKGNvbnN0IGtleSBpbiBmcm9udG1hdHRlcikge1xuXHRcdFx0Y29uc3QgbGlua3RleHQgPSBmcm9udG1hdHRlcltrZXldO1xuXHRcdFx0Y29uc3QgbGlua1RhcmdldENvbnRlbnQgPSBhd2FpdCB0aGlzLmRldGVybWluZVZhcmlhYmxlVmFsdWUobGlua3RleHQsIGZpbGUucGF0aCk7XG5cdFx0XHRpZiAoIWxpbmtUYXJnZXRDb250ZW50KSB7XG5cdFx0XHRcdHZhcmlhYmxlc1trZXldID0gbGlua3RleHQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCB3aXRob3V0RnJvbnRtYXR0ZXIgPSByZW1vdmVGcm9udG1hdHRlcihsaW5rVGFyZ2V0Q29udGVudC5jb250ZW50KTtcblx0XHRcdFx0Y29uc3Qgc2dCbG9jayA9IGdldFNnQmxvY0NvbnRlbnQod2l0aG91dEZyb250bWF0dGVyKTtcblx0XHRcdFx0aWYgKHNnQmxvY2spIHtcblx0XHRcdFx0XHRjb25zdCBuZXdQcm9tcHQgPSBuZXcgUHJvbXB0KFxuXHRcdFx0XHRcdFx0c2dCbG9jayxcblx0XHRcdFx0XHRcdGxpbmtUYXJnZXRDb250ZW50LmZpbGVwYXRoLFxuXHRcdFx0XHRcdFx0bGlua1RhcmdldENvbnRlbnQuc2VjdGlvblxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29uc3QgcHJvbXB0UmVzb2x2ZXIgPSBuZXcgUHJvbXB0UmVzb2x2ZXIodGhpcy5hcHAsIG5ld1Byb21wdEhpc3RvcnkpO1xuXHRcdFx0XHRcdHZhcmlhYmxlc1trZXldID0gYXdhaXQgcHJvbXB0UmVzb2x2ZXIucmVzb2x2ZVByb21wdChuZXdQcm9tcHQsIGxpbmtUYXJnZXRDb250ZW50LmZpbGVwYXRoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXJpYWJsZXNba2V5XSA9IHdpdGhvdXRGcm9udG1hdHRlcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBwcm9tcHQucmVtcGxhY2VQbGFjZWhvbGRlcnModmFyaWFibGVzKVxuXHR9XG5cblxuXHRwcml2YXRlIGFzeW5jIGRldGVybWluZVZhcmlhYmxlVmFsdWUobGlua3RleHQ6IGFueSwgbWFpbmZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHtjb250ZW50OiBzdHJpbmcsIGZpbGVwYXRoOiBzdHJpbmcsIHNlY3Rpb246IHN0cmluZyB8IHVuZGVmaW5lZH0gfCB1bmRlZmluZWQ+IHtcblx0XHQvLyBVdGlsaXNlIHBhcnNlTGlua3RleHQgcG91ciBleHRyYWlyZSBjaGVtaW4gZXQgc291cy1jaGVtaW5cblx0XHRjb25zdCB7IHBhdGgsIHN1YnBhdGggfSA9IHRoaXMucGFyc2VMaW5rdGV4dChsaW5rdGV4dCk7XG5cblx0XHQvLyBSXHUwMEU5c291ZHJlIGxlIGNoZW1pbiBkdSBsaWVuXG5cdFx0Y29uc3QgZGVzdEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHBhdGgsIG1haW5maWxlUGF0aCk7XG5cblx0XHRpZiAoIWRlc3RGaWxlKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRlc3RGaWxlLnBhdGgpO1xuXHRcdGlmICghKGxpbmtlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignbm8gaW5zdGFuY2Ugb2YgVEZpbGUnKTtcblx0XHR9XG5cdFx0Ly8gTGlyZSBsZSBjb250ZW51IGR1IGZpY2hpZXIgbGlcdTAwRTlcblx0XHRsZXQgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQobGlua2VkRmlsZSk7XG5cblx0XHQvLyBTaSB1biBzb3VzLWNoZW1pbiBlc3Qgc3BcdTAwRTljaWZpXHUwMEU5LCBleHRyYWlyZSBsYSBzZWN0aW9uIHNwXHUwMEU5Y2lmaXF1ZSBkdSBjb250ZW51XG5cdFx0bGV0IHJlc3VsdDtcblx0XHRpZiAoc3VicGF0aCkge1xuXHRcdFx0cmVzdWx0ID0gdGhpcy5leHRyYWN0U2VjdGlvbkNvbnRlbnQoY29udGVudCwgc3VicGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IGNvbnRlbnQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvbnRlbnQ6IHJlc3VsdCxcblx0XHRcdGZpbGVwYXRoOiBkZXN0RmlsZS5wYXRoLFxuXHRcdFx0c2VjdGlvbjogc3VicGF0aFxuXHRcdH07XG5cdH1cblxuXHRwcml2YXRlIHBhcnNlTGlua3RleHQobGlua3RleHQ6IHN0cmluZyk6IHsgcGF0aDogc3RyaW5nOyBzdWJwYXRoPzogc3RyaW5nIH0ge1xuXHRcdC8vIEljaSwgdHUgZG9pcyBcdTAwRTljcmlyZSBkdSBjb2RlIHBvdXIgYW5hbHlzZXIgbGUgbGllbiBldCBleHRyYWlyZSBsZSBjaGVtaW4gZXQgbGUgc291cy1jaGVtaW5cblx0XHQvLyBDZXR0ZSBmb25jdGlvbiBlc3QgdW4gZXhlbXBsZSBkZSBzdHJ1Y3R1cmUgZXQgZG9pdCBcdTAwRUF0cmUgYWRhcHRcdTAwRTllIFx1MDBFMCB0b24gYmVzb2luXG5cdFx0Y29uc3QgbWF0Y2ggPSBsaW5rdGV4dC5tYXRjaCgvXFxbXFxbKFteXFxdXSs/KSgjKFteI10rPykpP1xcXVxcXS8pO1xuXG5cdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRjb25zdCBsaW5rQW5kTGFiZWwgPSBtYXRjaFsxXS5zcGxpdCgnfCcpO1xuXHRcdFx0cmV0dXJuIHsgcGF0aDogbGlua0FuZExhYmVsWzBdLCBzdWJwYXRoOiBtYXRjaFszXSB9O1xuXHRcdH1cblx0XHRyZXR1cm4geyBwYXRoOiBsaW5rdGV4dCB9OyAvLyBDYXMgcGFyIGRcdTAwRTlmYXV0IHNpIGxlIGxpZW4gbidlc3QgcGFzIGF1IGZvcm1hdCBhdHRlbmR1XG5cdH1cblxuXHRwcml2YXRlIGV4dHJhY3RTZWN0aW9uQ29udGVudChjb250ZW50OiBzdHJpbmcsIHN1YnBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblx0XHRsZXQgc2VjdGlvbkNvbnRlbnQgPSAnJztcblx0XHRsZXQgaW5TZWN0aW9uID0gZmFsc2U7XG5cdFx0bGV0IGN1cnJlbnRMZXZlbCA9IDA7XG5cblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRcdGNvbnN0IGhlYWRlck1hdGNoID0gbGluZS5tYXRjaCgvXigjKylcXHMrKC4qKS8pO1xuXHRcdFx0aWYgKGhlYWRlck1hdGNoKSB7XG5cdFx0XHRcdGNvbnN0IGxldmVsID0gaGVhZGVyTWF0Y2hbMV0ubGVuZ3RoO1xuXHRcdFx0XHRjb25zdCB0aXRsZSA9IGhlYWRlck1hdGNoWzJdLnRyaW0oKTtcblxuXHRcdFx0XHRpZiAoaW5TZWN0aW9uICYmIGxldmVsIDw9IGN1cnJlbnRMZXZlbCkge1xuXHRcdFx0XHRcdC8vIFNpIG9uIGVzdCBkXHUwMEU5alx1MDBFMCBkYW5zIGxhIHNlY3Rpb24gZXQgcXUnb24gcmVuY29udHJlIHVuIGhlYWRlciBkZSBuaXZlYXUgXHUwMEU5Z2FsIG91IHN1cFx1MDBFOXJpZXVyLFxuXHRcdFx0XHRcdC8vIGNlbGEgc2lnbmlmaWUgcXUnb24gYSBhdHRlaW50IGxhIGZpbiBkZSBsYSBzZWN0aW9uIGQnaW50XHUwMEU5clx1MDBFQXQuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodGl0bGUgPT09IHN1YnBhdGgpIHtcblx0XHRcdFx0XHQvLyBTaSBsZSB0aXRyZSBjb3JyZXNwb25kIGF1IHN1YnBhdGggcmVjaGVyY2hcdTAwRTksXG5cdFx0XHRcdFx0Ly8gb24gY29tbWVuY2UgXHUwMEUwIGNhcHR1cmVyIGxlIGNvbnRlbnUgXHUwMEUwIHBhcnRpciBkZSBjZSBwb2ludC5cblx0XHRcdFx0XHRpblNlY3Rpb24gPSB0cnVlO1xuXHRcdFx0XHRcdGN1cnJlbnRMZXZlbCA9IGxldmVsO1xuXHRcdFx0XHRcdGNvbnRpbnVlOyAvLyBQYXNzZSBcdTAwRTAgbCdpdFx1MDBFOXJhdGlvbiBzdWl2YW50ZSBzYW5zIGFqb3V0ZXIgbGUgdGl0cmUgbHVpLW1cdTAwRUFtZSBhdSBjb250ZW51LlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpblNlY3Rpb24pIHtcblx0XHRcdFx0Ly8gQWpvdXRlIGxhIGxpZ25lIGNvdXJhbnRlIGF1IGNvbnRlbnUgZGUgbGEgc2VjdGlvbiBzaSBvbiBlc3QgZGFucyBsYSBzZWN0aW9uIGQnaW50XHUwMEU5clx1MDBFQXQuXG5cdFx0XHRcdHNlY3Rpb25Db250ZW50ICs9IGxpbmUgKyAnXFxuJztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gc2VjdGlvbkNvbnRlbnQudHJpbSgpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgUExBQ0VIT0xERVJfUkVHRVggfSBmcm9tIFwiLi9wcm9tcHRcIjtcblxudHlwZSBQbGFjZWhvbGRlckxldmVscyA9IHsgW3BsYWNlaG9sZGVyOiBzdHJpbmddOiBudW1iZXIgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbGV2ZWxNYXJrZG93bkhlYWRlcnMobWFya2Rvd246IHN0cmluZywgdGFyZ2V0QmFzZUxldmVsOiBudW1iZXIpOiBzdHJpbmcge1xuXHRjb25zdCBsaW5lcyA9IG1hcmtkb3duLnNwbGl0KCdcXG4nKTtcblx0bGV0IGFkanVzdGVkTWFya2Rvd24gPSAnJztcblxuXHQvLyBUcm91dmVyIGxlIG5pdmVhdSBtaW5pbXVtIGFjdHVlbCBkZXMgaGVhZGVycyBkYW5zIGxlIG1hcmtkb3duXG5cdGxldCBtaW5DdXJyZW50TGV2ZWwgPSBJbmZpbml0eTtcblx0bGluZXMuZm9yRWFjaChsaW5lID0+IHtcblx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oIyspLyk7XG5cdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRjb25zdCBsZXZlbCA9IG1hdGNoWzBdLmxlbmd0aDtcblx0XHRcdGlmIChsZXZlbCA8IG1pbkN1cnJlbnRMZXZlbCkge1xuXHRcdFx0XHRtaW5DdXJyZW50TGV2ZWwgPSBsZXZlbDtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG5cdC8vIENhbGN1bGVyIGxlIGRcdTAwRTljYWxhZ2Ugblx1MDBFOWNlc3NhaXJlIHBvdXIgYWp1c3RlciBsZSBuaXZlYXUgZGVzIGhlYWRlcnNcblx0Y29uc3QgbGV2ZWxPZmZzZXQgPSB0YXJnZXRCYXNlTGV2ZWwgLSBtaW5DdXJyZW50TGV2ZWw7XG5cblx0bGluZXMuZm9yRWFjaChsaW5lID0+IHtcblx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oIyspKFxccysuKikvKTtcblx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdGxldCBuZXdMZXZlbCA9IG1hdGNoWzFdLmxlbmd0aCArIGxldmVsT2Zmc2V0O1xuXHRcdFx0aWYgKG5ld0xldmVsIDwgMSkgbmV3TGV2ZWwgPSAxOyAvLyBBc3N1cmUgcXVlIGxlIG5pdmVhdSBlc3QgYXUgbW9pbnMgMVxuXHRcdFx0aWYgKG5ld0xldmVsID4gNikge1xuXHRcdFx0XHQvLyBTaSBsZSBuaXZlYXUgZFx1MDBFOXBhc3NlIDYsIGNvbnZlcnRpciBlbiB0ZXh0ZSBlbiBncmFzIGF2ZWMgbnVtXHUwMEU5cm90YXRpb25cblx0XHRcdFx0Y29uc3QgYm9sZFRleHQgPSBgKioke25ld0xldmVsIC0gNn0uICR7bWF0Y2hbMl0udHJpbSgpfSoqYDtcblx0XHRcdFx0YWRqdXN0ZWRNYXJrZG93biArPSBib2xkVGV4dCArICdcXG4nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgbmV3SGVhZGVyID0gYCR7JyMnLnJlcGVhdChuZXdMZXZlbCl9JHttYXRjaFsyXX1gO1xuXHRcdFx0XHRhZGp1c3RlZE1hcmtkb3duICs9IG5ld0hlYWRlciArICdcXG4nO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhZGp1c3RlZE1hcmtkb3duICs9IGxpbmUgKyAnXFxuJztcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBhZGp1c3RlZE1hcmtkb3duLnRyaW0oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVQbGFjZUhvbGRlcnNNYXJrZG93bkxldmVsKG1hcmtkb3duOiBzdHJpbmcpOiBQbGFjZWhvbGRlckxldmVscyB7XG5cdGNvbnN0IGxpbmVzID0gbWFya2Rvd24uc3BsaXQoJ1xcbicpO1xuXHRsZXQgY3VycmVudExldmVsID0gMDtcblx0bGV0IHJlc3VsdDogUGxhY2Vob2xkZXJMZXZlbHMgPSB7fTtcblxuXHRsaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuXHRcdC8vIERcdTAwRTl0ZWN0ZXIgbGVzIG5pdmVhdXggZGUgaGVhZGVyXG5cdFx0Y29uc3QgaGVhZGVyTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKCMrKS8pO1xuXHRcdGlmIChoZWFkZXJNYXRjaCkge1xuXHRcdFx0Y3VycmVudExldmVsID0gaGVhZGVyTWF0Y2hbMF0ubGVuZ3RoO1xuXHRcdH1cblxuXHRcdC8vIERcdTAwRTl0ZWN0ZXIgbGVzIHBsYWNlaG9sZGVyc1xuXHRcdGNvbnN0IHBsYWNlaG9sZGVyTWF0Y2hlcyA9IFsuLi5saW5lLm1hdGNoQWxsKG5ldyBSZWdFeHAoUExBQ0VIT0xERVJfUkVHRVgsICdnJykpXTtcblx0XHRwbGFjZWhvbGRlck1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiB7XG5cdFx0XHRjb25zdCBwbGFjZWhvbGRlck5hbWUgPSBtYXRjaFsxXTtcblx0XHRcdGlmIChwbGFjZWhvbGRlck5hbWUgJiYgIShwbGFjZWhvbGRlck5hbWUgaW4gcmVzdWx0KSkge1xuXHRcdFx0XHQvLyBBc3NpZ25lciBsZSBuaXZlYXUgYWN0dWVsIGF1IHBsYWNlaG9sZGVyIHMnaWwgbidhIHBhcyBlbmNvcmUgXHUwMEU5dFx1MDBFOSB0cm91dlx1MDBFOVxuXHRcdFx0XHRyZXN1bHRbcGxhY2Vob2xkZXJOYW1lXSA9IGN1cnJlbnRMZXZlbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFJcdTAwRTlpbml0aWFsaXNlciBsZSBuaXZlYXUgcG91ciBsZXMgbGlnbmVzIHNhbnMgaGVhZGVyXG5cdFx0aWYgKCFoZWFkZXJNYXRjaCAmJiAhbGluZS50cmltKCkuc3RhcnRzV2l0aCgne3snKSkge1xuXHRcdFx0Y3VycmVudExldmVsID0gMDtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiByZXN1bHQ7XG59XG4iLCAiaW1wb3J0IHsgY29tcHV0ZVBsYWNlSG9sZGVyc01hcmtkb3duTGV2ZWwsIHJlbGV2ZWxNYXJrZG93bkhlYWRlcnMgfSBmcm9tIFwiLi9tYXJrZG93bi1sZXZlbGVyXCI7XG5cbmV4cG9ydCBjb25zdCBQTEFDRUhPTERFUl9SRUdFWCA9ICdcXFxce1xcXFx7KFtcXFxcdy1dKylcXFxcfVxcXFx9JztcblxuZXhwb3J0IGNsYXNzIFByb21wdCB7XG5cdGNvbnN0cnVjdG9yKFxuXHRcdHB1YmxpYyByZWFkb25seSB0ZW1wbGF0ZTogc3RyaW5nLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZmlsZXBhdGg6IHN0cmluZyxcblx0XHRwcml2YXRlIHJlYWRvbmx5IHNlY3Rpb246IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuXHQpIHt9XG5cblx0cHVibGljIHJlbXBsYWNlUGxhY2Vob2xkZXJzKHZhcmlhYmxlczoge1trZXk6IHN0cmluZ106IHN0cmluZ30pOiBzdHJpbmcge1xuXHRcdGNvbnN0IHBsYWNlaG9sZGVyc0xldmVscyA9IGNvbXB1dGVQbGFjZUhvbGRlcnNNYXJrZG93bkxldmVsKHRoaXMudGVtcGxhdGUpO1xuXHRcdHJldHVybiB0aGlzLnRlbXBsYXRlLnJlcGxhY2UobmV3IFJlZ0V4cChQTEFDRUhPTERFUl9SRUdFWCwgJ2cnKSwgKG1hdGNoLCB2YXJpYWJsZU5hbWUpID0+IHtcblx0XHRcdGlmICh2YXJpYWJsZXMuaGFzT3duUHJvcGVydHkodmFyaWFibGVOYW1lKSkge1xuXHRcdFx0XHRjb25zdCBwbGFjZWhvbGRlckxldmVsID0gcGxhY2Vob2xkZXJzTGV2ZWxzW3ZhcmlhYmxlTmFtZV07XG5cdFx0XHRcdGNvbnN0IG1hcmtkb3duID0gdmFyaWFibGVzW3ZhcmlhYmxlTmFtZV07XG5cdFx0XHRcdHJldHVybiByZWxldmVsTWFya2Rvd25IZWFkZXJzKG1hcmtkb3duLCBwbGFjZWhvbGRlckxldmVsICsgMSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgaXNFcXVhbChvdGhlcjogUHJvbXB0KTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZmlsZXBhdGggPT09IG90aGVyLmZpbGVwYXRoICYmIHRoaXMuc2VjdGlvbiA9PT0gb3RoZXIuc2VjdGlvbjtcblx0fVxuXG5cdHB1YmxpYyBnZXRQcm9tcHRJZCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiAhIXRoaXMuc2VjdGlvbiA/IGAke3RoaXMuZmlsZXBhdGh9IyR7dGhpcy5zZWN0aW9ufWAgOiB0aGlzLmZpbGVwYXRoO1xuXHR9XG5cbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gZ2V0VmFyaWFibGVzKGNvbnRlbnQ6IHN0cmluZyk6IFNldDxzdHJpbmc+IHtcblx0Y29uc3QgcmVnZXggPSAve3soW1xcdy1dKyl9fS9nOyAvLyBNb2RpZmlcdTAwRTkgcG91ciBpbmNsdXJlIGRlcyB0aXJldHMgZGFucyBsZXMgbm9tcyBkZSB2YXJpYWJsZXNcblx0bGV0IG1hdGNoO1xuXHRjb25zdCB2YXJpYWJsZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuXHR3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcblx0XHR2YXJpYWJsZXMuYWRkKG1hdGNoWzFdKTtcblx0fVxuXHRyZXR1cm4gdmFyaWFibGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2dCbG9jQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuXHQvLyBNb2RpZmljYXRpb24gZGUgbCdleHByZXNzaW9uIHJcdTAwRTlndWxpXHUwMEU4cmUgcG91ciBpZ25vcmVyIGxlcyBlc3BhY2VzIGF2YW50IGV0IGFwclx1MDBFOHMgbGUgYmxvYyBgc2dgXG5cdGNvbnN0IHJlZ2V4ID0gL15cXHMqYGBgc2dcXG4oW1xcc1xcU10qPylcXG5gYGBcXHMqJC87XG5cdGNvbnN0IGNvcnJlc3BvbmRhbmNlID0gY29udGVudC5tYXRjaChyZWdleCk7XG5cdGlmIChjb3JyZXNwb25kYW5jZSkge1xuXHRcdHJldHVybiBjb3JyZXNwb25kYW5jZVsxXS50cmltKCk7IC8vIFJldG91cm5lIGxlIGNvbnRlbnUgZHUgYmxvYyBzZywgZW4gcmV0aXJhbnQgbGVzIGVzcGFjZXMgZGUgZFx1MDBFOWJ1dCBldCBkZSBmaW5cblx0fVxuXHRyZXR1cm4gdW5kZWZpbmVkOyAvLyBSZXRvdXJuZSB1bmRlZmluZWQgc2kgbGUgdGV4dGUgbidlc3QgcGFzIHVuIGJsb2Mgc2dcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZyb250bWF0dGVyKGNvbnRlbnQ6IHN0cmluZykge1xuXHQvLyBDZXR0ZSBleHByZXNzaW9uIHJcdTAwRTlndWxpXHUwMEU4cmUgY2hlcmNoZSBsZXMgcGFydGllcyBlbmNhZHJcdTAwRTllcyBwYXIgXCItLS1cIiBhdSBkXHUwMEU5YnV0IGR1IHRleHRlXG5cdGNvbnN0IHJlZ2V4ID0gL14tLS1bXFxzXFxTXSs/LS0tXFxuPy87XG5cdC8vIFJlbXBsYWNlIGxlIGZyb250bWF0dGVyIHBhciB1bmUgY2hhXHUwMEVFbmUgdmlkZSBzJ2lsIGVzdCB0cm91dlx1MDBFOVxuXHRyZXR1cm4gY29udGVudC5yZXBsYWNlKHJlZ2V4LCAnJyk7XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBDb3B5UHJvbXB0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByb21wdDogc3RyaW5nO1xuXHRvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcm9tcHQ6IHN0cmluZywgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHRcdHRoaXMucHJvbXB0ID0gcHJvbXB0O1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlByb21wdFwiIH0pO1xuXG5cdFx0Y29uc3QgdGV4dGFyZWEgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdHN0eWxlOiBcIndpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBtYXJnaW4tYm90dG9tOiAyMHB4O1wiIC8vIEFzc3VyZSBxdWUgbGUgdGV4dGFyZWEgcHJlbmQgdG91dGUgbGEgbGFyZ2V1ciBldCBham91dGUgdW4gcGV1IGQnZXNwYWNlIGVuIGRlc3NvdXNcblx0XHRcdH1cblx0XHR9KTtcblx0XHR0ZXh0YXJlYS52YWx1ZSA9IHRoaXMucHJvbXB0O1xuXHRcdHRleHRhcmVhLnJvd3MgPSAxMDtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdHN0eWxlOiBcInRleHQtYWxpZ246IHJpZ2h0O1wiIC8vIEFsaWduZW1lbnQgZHUgYm91dG9uIFx1MDBFMCBkcm9pdGVcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IGJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU3VibWl0XCIgfSk7XG5cdFx0YnV0dG9uLmFkZENsYXNzKFwibW9kLWN0YVwiKTtcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdHRoaXMub25TdWJtaXQodGV4dGFyZWEudmFsdWUpO1xuXHRcdH0pO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBdUI7OztBQ0F2QixJQUFBQyxtQkFBcUQ7OztBQ0FyRCxzQkFBMkI7OztBQ0lwQixTQUFTLHVCQUF1QixVQUFrQixpQkFBaUM7QUFDekYsUUFBTSxRQUFRLFNBQVMsTUFBTSxJQUFJO0FBQ2pDLE1BQUksbUJBQW1CO0FBR3ZCLE1BQUksa0JBQWtCO0FBQ3RCLFFBQU0sUUFBUSxVQUFRO0FBQ3JCLFVBQU0sUUFBUSxLQUFLLE1BQU0sT0FBTztBQUNoQyxRQUFJLE9BQU87QUFDVixZQUFNLFFBQVEsTUFBTSxDQUFDLEVBQUU7QUFDdkIsVUFBSSxRQUFRLGlCQUFpQjtBQUM1QiwwQkFBa0I7QUFBQSxNQUNuQjtBQUFBLElBQ0Q7QUFBQSxFQUNELENBQUM7QUFHRCxRQUFNLGNBQWMsa0JBQWtCO0FBRXRDLFFBQU0sUUFBUSxVQUFRO0FBQ3JCLFVBQU0sUUFBUSxLQUFLLE1BQU0sY0FBYztBQUN2QyxRQUFJLE9BQU87QUFDVixVQUFJLFdBQVcsTUFBTSxDQUFDLEVBQUUsU0FBUztBQUNqQyxVQUFJLFdBQVc7QUFBRyxtQkFBVztBQUM3QixVQUFJ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
