/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StoreGPTPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/sgBlock.ts
var import_obsidian3 = require("obsidian");

// src/prompt-resolver.ts
var import_obsidian = require("obsidian");

// src/markdown-leveler.ts
function relevelMarkdownHeaders(markdown, targetBaseLevel) {
  const lines = markdown.split("\n");
  let adjustedMarkdown = "";
  let minCurrentLevel = Infinity;
  lines.forEach((line) => {
    const match = line.match(/^(#+)/);
    if (match) {
      const level = match[0].length;
      if (level < minCurrentLevel) {
        minCurrentLevel = level;
      }
    }
  });
  const levelOffset = targetBaseLevel - minCurrentLevel;
  lines.forEach((line) => {
    const match = line.match(/^(#+)(\s+.*)/);
    if (match) {
      let newLevel = match[1].length + levelOffset;
      if (newLevel < 1)
        newLevel = 1;
      if (newLevel > 6) {
        const boldText = `**${newLevel - 6}. ${match[2].trim()}**`;
        adjustedMarkdown += boldText + "\n";
      } else {
        const newHeader = `${"#".repeat(newLevel)}${match[2]}`;
        adjustedMarkdown += newHeader + "\n";
      }
    } else {
      adjustedMarkdown += line + "\n";
    }
  });
  return adjustedMarkdown.trim();
}
function computePlaceHoldersMarkdownLevel(markdown) {
  const lines = markdown.split("\n");
  let currentLevel = 0;
  let result = {};
  lines.forEach((line) => {
    const headerMatch = line.match(/^(#+)/);
    if (headerMatch) {
      currentLevel = headerMatch[0].length;
    }
    const placeholderMatches = [...line.matchAll(new RegExp(PLACEHOLDER_REGEX, "g"))];
    placeholderMatches.forEach((match) => {
      const placeholderName = match[1];
      if (placeholderName && !(placeholderName in result)) {
        result[placeholderName] = currentLevel;
      }
    });
    if (!headerMatch && !line.trim().startsWith("{{")) {
      currentLevel = 0;
    }
  });
  return result;
}

// src/prompt.ts
var PLACEHOLDER_REGEX = "\\{\\{([\\w-]+)\\}\\}";
var Prompt = class {
  constructor(template, filepath, section = void 0) {
    this.template = template;
    this.filepath = filepath;
    this.section = section;
  }
  remplacePlaceholders(variables) {
    const placeholdersLevels = computePlaceHoldersMarkdownLevel(this.template);
    return this.template.replace(new RegExp(PLACEHOLDER_REGEX, "g"), (match, variableName) => {
      if (variables.hasOwnProperty(variableName)) {
        const placeholderLevel = placeholdersLevels[variableName];
        const markdown = variables[variableName];
        return relevelMarkdownHeaders(markdown, placeholderLevel + 1);
      }
      return match;
    });
  }
  isEqual(other) {
    return this.filepath === other.filepath && this.section === other.section;
  }
  getPromptId() {
    return !!this.section ? `${this.filepath}#${this.section}` : this.filepath;
  }
};

// src/sg-block-utils.ts
function getSgBlocContent(content) {
  const regex = /^\s*```sg\n([\s\S]*?)\n```\s*$/;
  const correspondance = content.match(regex);
  if (correspondance) {
    return correspondance[1].trim();
  }
  return void 0;
}
function removeFrontmatter(content) {
  const regex = /^---[\s\S]+?---\n?/;
  return content.replace(regex, "");
}

// src/prompt-resolver.ts
var PromptResolver = class {
  constructor(app, promptHistory = []) {
    this.app = app;
    this.promptHistory = promptHistory;
  }
  async resolvePrompt(prompt, sourceFile) {
    const newPromptHistory = this.promptHistory.concat(prompt);
    if (this.promptHistory.some((p) => p.isEqual(prompt))) {
      const chainDescription = newPromptHistory.map((p) => {
        if (p.isEqual(prompt)) {
          return `*${p.getPromptId()}*`;
        }
        return p.getPromptId();
      }).join(" -> ");
      throw new Error(`Circular reference detected: ${chainDescription}`);
    }
    const file = this.app.vault.getAbstractFileByPath(sourceFile);
    const variables = {};
    if (!(file instanceof import_obsidian.TFile)) {
      throw new Error("no instance of TFile");
    }
    const fileCache = this.app.metadataCache.getFileCache(file);
    if (!fileCache) {
      throw new Error("Aucun cache de fichier trouv\xE9.");
    }
    const frontmatter = fileCache.frontmatter;
    if (!frontmatter) {
      console.log("no frontmatter");
      return prompt.template;
    }
    for (const key in frontmatter) {
      const linktext = frontmatter[key];
      const linkTargetContent = await this.determineVariableValue(linktext, file.path);
      if (!linkTargetContent) {
        variables[key] = linktext;
      } else {
        const withoutFrontmatter = removeFrontmatter(linkTargetContent.content);
        const sgBlock = getSgBlocContent(withoutFrontmatter);
        if (sgBlock) {
          const newPrompt = new Prompt(
            sgBlock,
            linkTargetContent.filepath,
            linkTargetContent.section
          );
          const promptResolver = new PromptResolver(this.app, newPromptHistory);
          variables[key] = await promptResolver.resolvePrompt(newPrompt, linkTargetContent.filepath);
        } else {
          variables[key] = withoutFrontmatter;
        }
      }
    }
    return prompt.remplacePlaceholders(variables);
  }
  async determineVariableValue(linktext, mainfilePath) {
    const { path, subpath } = this.parseLinktext(linktext);
    const destFile = this.app.metadataCache.getFirstLinkpathDest(path, mainfilePath);
    if (!destFile) {
      return void 0;
    }
    const linkedFile = this.app.vault.getAbstractFileByPath(destFile.path);
    if (!(linkedFile instanceof import_obsidian.TFile)) {
      throw new Error("no instance of TFile");
    }
    let content = await this.app.vault.read(linkedFile);
    let result;
    if (subpath) {
      result = this.extractSectionContent(content, subpath);
    } else {
      result = content;
    }
    return {
      content: result,
      filepath: destFile.path,
      section: subpath
    };
  }
  parseLinktext(linktext) {
    const match = linktext.match(/\[\[([^\]]+?)(#([^#]+?))?\]\]/);
    if (match) {
      return { path: match[1], subpath: match[3] };
    }
    return { path: linktext };
  }
  extractSectionContent(content, subpath) {
    const lines = content.split("\n");
    let sectionContent = "";
    let inSection = false;
    let currentLevel = 0;
    for (const line of lines) {
      const headerMatch = line.match(/^(#+)\s+(.*)/);
      if (headerMatch) {
        const level = headerMatch[1].length;
        const title = headerMatch[2].trim();
        if (inSection && level <= currentLevel) {
          break;
        }
        if (title === subpath) {
          inSection = true;
          currentLevel = level;
          continue;
        }
      }
      if (inSection) {
        sectionContent += line + "\n";
      }
    }
    return sectionContent.trim();
  }
};

// src/CopyPromptModal.ts
var import_obsidian2 = require("obsidian");
var CopyPromptModal = class extends import_obsidian2.Modal {
  constructor(app, prompt, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
    this.prompt = prompt;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Prompt" });
    const textarea = contentEl.createEl("textarea", {
      attr: {
        style: "width: 100%; box-sizing: border-box; margin-bottom: 20px;"
        // Assure que le textarea prend toute la largeur et ajoute un peu d'espace en dessous
      }
    });
    textarea.value = this.prompt;
    textarea.rows = 10;
    const buttonContainer = contentEl.createEl("div", {
      attr: {
        style: "text-align: right;"
        // Alignement du bouton Ã  droite
      }
    });
    const button = buttonContainer.createEl("button", { text: "Submit" });
    button.addClass("mod-cta");
    button.addEventListener("click", () => {
      this.close();
      this.onSubmit(textarea.value);
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// src/sgBlock.ts
var SGBlock = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin.registerMarkdownCodeBlockProcessor(
      "sg",
      async (source, el, ctx) => {
        this.blockTgHandler(source, el, ctx);
      }
    );
  }
  async blockTgHandler(source, container, { sourcePath: path }) {
    setTimeout(async () => {
      const preElement = document.createElement("pre");
      preElement.style.whiteSpace = "pre-wrap";
      const codeElement = document.createElement("code");
      codeElement.textContent = source;
      preElement.appendChild(codeElement);
      container.appendChild(preElement);
      this.addTGMenu(container, source, path);
    }, 100);
  }
  addTGMenu(el, source, sourcePath) {
    var _a;
    const div = document.createElement("div");
    div.classList.add("plug-tg-tgmenu", "plug-tg-flex", "plug-tg-justify-end");
    const generateSVG = `<svg viewBox="0 0 100 100" class="svg-icon GENERATE_ICON"><defs><style>.cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:4px;}</style></defs><g id="Layer_2" data-name="Layer 2"><g id="VECTOR"><rect class="cls-1" x="74.98" y="21.55" width="18.9" height="37.59"></rect><path class="cls-1" d="M38.44,27.66a8,8,0,0,0-8.26,1.89L24.8,34.86a25.44,25.44,0,0,0-6,9.3L14.14,56.83C11.33,64.7,18.53,67.3,21,60.9" transform="translate(-1.93 -15.75)"></path><polyline class="cls-1" points="74.98 25.58 56.61 18.72 46.72 15.45"></polyline><path class="cls-1" d="M55.45,46.06,42.11,49.43,22.76,50.61c-8.27,1.3-5.51,11.67,4.88,12.8L46.5,65.78,53,68.4a23.65,23.65,0,0,0,17.9,0l6-2.46" transform="translate(-1.93 -15.75)"></path><path class="cls-1" d="M37.07,64.58v5.91A3.49,3.49,0,0,1,33.65,74h0a3.49,3.49,0,0,1-3.45-3.52V64.58" transform="translate(-1.93 -15.75)"></path><path class="cls-1" d="M48,66.58v5.68a3.4,3.4,0,0,1-3.34,3.46h0a3.4,3.4,0,0,1-3.34-3.45h0V65.58" transform="translate(-1.93 -15.75)"></path><polyline class="cls-1" points="28.75 48.05 22.66 59.3 13.83 65.61 14.41 54.5 19.11 45.17"></polyline><polyline class="cls-1" points="25.17 34.59 43.75 0.25 52.01 5.04 36.39 33.91"></polyline><line class="cls-1" x1="0.25" y1="66.92" x2="13.83" y2="66.92"></line></g></g></svg>`;
    const button = this.createRunButton("Generate Text", generateSVG);
    button.addEventListener("click", async () => {
      console.log("trigger");
      const promptResolver = new PromptResolver(this.plugin.app);
      let resolvedPrompt = await promptResolver.resolvePrompt(new Prompt(source, sourcePath), sourcePath);
      new CopyPromptModal(this.plugin.app, resolvedPrompt, (result) => {
        this.copyToClipboard(result);
        new import_obsidian3.Notice("Prompt copied to clipboard", 3e3);
      }).open();
    });
    div.appendChild(button);
    (_a = el.parentElement) == null ? void 0 : _a.appendChild(div);
  }
  async copyToClipboard(texte) {
    try {
      await navigator.clipboard.writeText(texte);
      console.log("Texte copi\xE9 dans le presse-papier");
    } catch (err) {
      console.error("Erreur lors de la copie dans le presse-papier", err);
    }
  }
  createRunButton(label, svg) {
    const button = document.createElement("div");
    button.classList.add("clickable-icon");
    button.setAttribute("aria-label", label);
    button.innerHTML = svg;
    return button;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var StoreGPTPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    new SGBlock(this);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NnQmxvY2sudHMiLCAic3JjL3Byb21wdC1yZXNvbHZlci50cyIsICJzcmMvbWFya2Rvd24tbGV2ZWxlci50cyIsICJzcmMvcHJvbXB0LnRzIiwgInNyYy9zZy1ibG9jay11dGlscy50cyIsICJzcmMvQ29weVByb21wdE1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgU0dCbG9jayBmcm9tIFwiLi9zZ0Jsb2NrXCI7XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgU3RvcmVHUFRQbHVnaW5TZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBTdG9yZUdQVFBsdWdpblNldHRpbmdzID0ge1xuXHRteVNldHRpbmc6ICdkZWZhdWx0J1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yZUdQVFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBTdG9yZUdQVFBsdWdpblNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0bmV3IFNHQmxvY2sodGhpcyk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTdG9yZUdQVFBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5pbXBvcnQgeyBQcm9tcHRSZXNvbHZlciB9IGZyb20gXCIuL3Byb21wdC1yZXNvbHZlclwiO1xuaW1wb3J0IHsgQ29weVByb21wdE1vZGFsIH0gZnJvbSBcIi4vQ29weVByb21wdE1vZGFsXCI7XG5pbXBvcnQgeyBQcm9tcHQgfSBmcm9tIFwiLi9wcm9tcHRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU0dCbG9jayB7XG5cdHBsdWdpbjogU3RvcmVHUFRQbHVnaW47XG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogU3RvcmVHUFRQbHVnaW4pIHtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblxuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXG5cdFx0XHRcInNnXCIsXG5cdFx0XHRhc3luYyAoc291cmNlLCBlbCwgY3R4KSA9PiB7XG5cdFx0XHRcdHRoaXMuYmxvY2tUZ0hhbmRsZXIoc291cmNlLCBlbCwgY3R4KTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgYmxvY2tUZ0hhbmRsZXIoXG5cdFx0c291cmNlOiBzdHJpbmcsXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcblx0XHR7IHNvdXJjZVBhdGg6IHBhdGggfTogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dFxuXHQpIHtcblx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHByZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcmUnKTtcblx0XHRcdHByZUVsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7IC8vIEdhcmRlIGxlcyBzYXV0cyBkZSBsaWduZSBldCBlc3BhY2VzXG5cblx0XHRcdC8vIENyXHUwMEU5YXRpb24gZCd1biBcdTAwRTlsXHUwMEU5bWVudCBjb2RlIHF1aSBjb250aWVuZHJhIGxlIHRleHRlXG5cdFx0XHRjb25zdCBjb2RlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvZGUnKTtcblx0XHRcdGNvZGVFbGVtZW50LnRleHRDb250ZW50ID0gc291cmNlOyAvLyBBc3NpZ25lIGxlIGNvbnRlbnUgc291cmNlIFx1MDBFMCBsJ1x1MDBFOWxcdTAwRTltZW50IGNvZGVcblxuXHRcdFx0Ly8gQWpvdXRlIGwnXHUwMEU5bFx1MDBFOW1lbnQgY29kZSBcdTAwRTAgbCdcdTAwRTlsXHUwMEU5bWVudCBwcmVcblx0XHRcdHByZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY29kZUVsZW1lbnQpO1xuXG5cdFx0XHQvLyBBam91dGUgbCdcdTAwRTlsXHUwMEU5bWVudCBwcmUgYXUgY29udGFpbmVyIHBvdXIgbCdhZmZpY2hhZ2Vcblx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtZW50KTtcblxuXHRcdFx0dGhpcy5hZGRUR01lbnUoY29udGFpbmVyLCBzb3VyY2UsIHBhdGgpO1xuXHRcdH0sIDEwMCk7XG5cdH1cblxuXHRwcml2YXRlIGFkZFRHTWVudShcblx0XHRlbDogSFRNTEVsZW1lbnQsXG5cdFx0c291cmNlOiBzdHJpbmcsXG5cdFx0c291cmNlUGF0aDogc3RyaW5nXG5cdCkge1xuXHRcdGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0ZGl2LmNsYXNzTGlzdC5hZGQoXCJwbHVnLXRnLXRnbWVudVwiLCBcInBsdWctdGctZmxleFwiLCBcInBsdWctdGctanVzdGlmeS1lbmRcIik7XG5cdFx0Y29uc3QgZ2VuZXJhdGVTVkcgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiBjbGFzcz1cInN2Zy1pY29uIEdFTkVSQVRFX0lDT05cIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6bm9uZTtzdHJva2U6Y3VycmVudENvbG9yO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NHB4O308L3N0eWxlPjwvZGVmcz48ZyBpZD1cIkxheWVyXzJcIiBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgaWQ9XCJWRUNUT1JcIj48cmVjdCBjbGFzcz1cImNscy0xXCIgeD1cIjc0Ljk4XCIgeT1cIjIxLjU1XCIgd2lkdGg9XCIxOC45XCIgaGVpZ2h0PVwiMzcuNTlcIj48L3JlY3Q+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNMzguNDQsMjcuNjZhOCw4LDAsMCwwLTguMjYsMS44OUwyNC44LDM0Ljg2YTI1LjQ0LDI1LjQ0LDAsMCwwLTYsOS4zTDE0LjE0LDU2LjgzQzExLjMzLDY0LjcsMTguNTMsNjcuMywyMSw2MC45XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0xLjkzIC0xNS43NSlcIj48L3BhdGg+PHBvbHlsaW5lIGNsYXNzPVwiY2xzLTFcIiBwb2ludHM9XCI3NC45OCAyNS41OCA1Ni42MSAxOC43MiA0Ni43MiAxNS40NVwiPjwvcG9seWxpbmU+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNNTUuNDUsNDYuMDYsNDIuMTEsNDkuNDMsMjIuNzYsNTAuNjFjLTguMjcsMS4zLTUuNTEsMTEuNjcsNC44OCwxMi44TDQ2LjUsNjUuNzgsNTMsNjguNGEyMy42NSwyMy42NSwwLDAsMCwxNy45LDBsNi0yLjQ2XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0xLjkzIC0xNS43NSlcIj48L3BhdGg+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNMzcuMDcsNjQuNTh2NS45MUEzLjQ5LDMuNDksMCwwLDEsMzMuNjUsNzRoMGEzLjQ5LDMuNDksMCwwLDEtMy40NS0zLjUyVjY0LjU4XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0xLjkzIC0xNS43NSlcIj48L3BhdGg+PHBhdGggY2xhc3M9XCJjbHMtMVwiIGQ9XCJNNDgsNjYuNTh2NS42OGEzLjQsMy40LDAsMCwxLTMuMzQsMy40NmgwYTMuNCwzLjQsMCwwLDEtMy4zNC0zLjQ1aDBWNjUuNThcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoLTEuOTMgLTE1Ljc1KVwiPjwvcGF0aD48cG9seWxpbmUgY2xhc3M9XCJjbHMtMVwiIHBvaW50cz1cIjI4Ljc1IDQ4LjA1IDIyLjY2IDU5LjMgMTMuODMgNjUuNjEgMTQuNDEgNTQuNSAxOS4xMSA0NS4xN1wiPjwvcG9seWxpbmU+PHBvbHlsaW5lIGNsYXNzPVwiY2xzLTFcIiBwb2ludHM9XCIyNS4xNyAzNC41OSA0My43NSAwLjI1IDUyLjAxIDUuMDQgMzYuMzkgMzMuOTFcIj48L3BvbHlsaW5lPjxsaW5lIGNsYXNzPVwiY2xzLTFcIiB4MT1cIjAuMjVcIiB5MT1cIjY2LjkyXCIgeDI9XCIxMy44M1wiIHkyPVwiNjYuOTJcIj48L2xpbmU+PC9nPjwvZz48L3N2Zz5gO1xuXG5cdFx0Y29uc3QgYnV0dG9uID0gdGhpcy5jcmVhdGVSdW5CdXR0b24oXCJHZW5lcmF0ZSBUZXh0XCIsIGdlbmVyYXRlU1ZHKTtcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKCd0cmlnZ2VyJyk7XG5cblx0XHRcdGNvbnN0IHByb21wdFJlc29sdmVyID0gbmV3IFByb21wdFJlc29sdmVyKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0XHRsZXQgcmVzb2x2ZWRQcm9tcHQgPSBhd2FpdCBwcm9tcHRSZXNvbHZlci5yZXNvbHZlUHJvbXB0KG5ldyBQcm9tcHQoc291cmNlLCBzb3VyY2VQYXRoKSwgc291cmNlUGF0aCk7XG5cblx0XHRcdG5ldyBDb3B5UHJvbXB0TW9kYWwodGhpcy5wbHVnaW4uYXBwLCByZXNvbHZlZFByb21wdCwgKHJlc3VsdDogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdHRoaXMuY29weVRvQ2xpcGJvYXJkKHJlc3VsdCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQcm9tcHQgY29waWVkIHRvIGNsaXBib2FyZFwiLCAzMDAwKTtcblx0XHRcdH0pLm9wZW4oKTtcblxuXHRcdH0pO1xuXG5cdFx0ZGl2LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cdFx0ZWwucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQoZGl2KTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY29weVRvQ2xpcGJvYXJkKHRleHRlOiBzdHJpbmcpIHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dGUpO1xuXHRcdFx0Y29uc29sZS5sb2coJ1RleHRlIGNvcGlcdTAwRTkgZGFucyBsZSBwcmVzc2UtcGFwaWVyJyk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSBjb3BpZSBkYW5zIGxlIHByZXNzZS1wYXBpZXInLCBlcnIpO1xuXHRcdH1cblx0fVxuXG5cdGNyZWF0ZVJ1bkJ1dHRvbihsYWJlbDogc3RyaW5nLCBzdmc6IHN0cmluZykge1xuXHRcdGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjbGlja2FibGUtaWNvblwiKTtcblx0XHRidXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBsYWJlbCk7XG5cdFx0Ly9hcmlhLWxhYmVsLXBvc2l0aW9uPVwicmlnaHRcIlxuXHRcdGJ1dHRvbi5pbm5lckhUTUwgPSBzdmc7XG5cblx0XHRyZXR1cm4gYnV0dG9uO1xuXHR9XG5cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBQcm9tcHQgfSBmcm9tIFwiLi9wcm9tcHRcIjtcbmltcG9ydCB7IGdldFNnQmxvY0NvbnRlbnQsIHJlbW92ZUZyb250bWF0dGVyIH0gZnJvbSBcIi4vc2ctYmxvY2stdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFByb21wdFJlc29sdmVyIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBhcHA6IEFwcCwgcHJpdmF0ZSByZWFkb25seSBwcm9tcHRIaXN0b3J5OiBQcm9tcHRbXSA9IFtdKSB7fVxuXG5cdHB1YmxpYyBhc3luYyByZXNvbHZlUHJvbXB0KHByb21wdDogUHJvbXB0LCBzb3VyY2VGaWxlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IG5ld1Byb21wdEhpc3RvcnkgPSB0aGlzLnByb21wdEhpc3RvcnkuY29uY2F0KHByb21wdCk7XG5cblx0XHRpZiAodGhpcy5wcm9tcHRIaXN0b3J5LnNvbWUoKHApID0+IHAuaXNFcXVhbChwcm9tcHQpKSkge1xuXHRcdFx0Y29uc3QgY2hhaW5EZXNjcmlwdGlvbiA9IG5ld1Byb21wdEhpc3RvcnkubWFwKChwKSA9PiB7XG5cdFx0XHRcdGlmIChwLmlzRXF1YWwocHJvbXB0KSkge1xuXHRcdFx0XHRcdHJldHVybiBgKiR7cC5nZXRQcm9tcHRJZCgpfSpgO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBwLmdldFByb21wdElkKCk7XG5cdFx0XHR9KS5qb2luKCcgLT4gJyk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYENpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZDogJHtjaGFpbkRlc2NyaXB0aW9ufWApO1xuXHRcdH1cblx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNvdXJjZUZpbGUpO1xuXHRcdGNvbnN0IHZhcmlhYmxlczoge1trZXk6IHN0cmluZ106IHN0cmluZ30gPSB7fVxuXG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdubyBpbnN0YW5jZSBvZiBURmlsZScpO1xuXHRcdH1cblx0XHQvLyBSXHUwMEU5Y3VwXHUwMEU4cmUgbGUgY2FjaGUgZHUgZmljaGllciBhY3R1ZWwgcG91ciBhY2NcdTAwRTlkZXIgYXUgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblx0XHRpZiAoIWZpbGVDYWNoZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQXVjdW4gY2FjaGUgZGUgZmljaGllciB0cm91dlx1MDBFOS5cIik7XG5cdFx0fVxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gZmlsZUNhY2hlLmZyb250bWF0dGVyO1xuXG5cdFx0aWYgKCFmcm9udG1hdHRlcikge1xuXHRcdFx0Y29uc29sZS5sb2coJ25vIGZyb250bWF0dGVyJyk7XG5cdFx0XHRyZXR1cm4gcHJvbXB0LnRlbXBsYXRlO1xuXHRcdH1cblx0XHRmb3IgKGNvbnN0IGtleSBpbiBmcm9udG1hdHRlcikge1xuXHRcdFx0Y29uc3QgbGlua3RleHQgPSBmcm9udG1hdHRlcltrZXldO1xuXHRcdFx0Y29uc3QgbGlua1RhcmdldENvbnRlbnQgPSBhd2FpdCB0aGlzLmRldGVybWluZVZhcmlhYmxlVmFsdWUobGlua3RleHQsIGZpbGUucGF0aCk7XG5cdFx0XHRpZiAoIWxpbmtUYXJnZXRDb250ZW50KSB7XG5cdFx0XHRcdHZhcmlhYmxlc1trZXldID0gbGlua3RleHQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCB3aXRob3V0RnJvbnRtYXR0ZXIgPSByZW1vdmVGcm9udG1hdHRlcihsaW5rVGFyZ2V0Q29udGVudC5jb250ZW50KTtcblx0XHRcdFx0Y29uc3Qgc2dCbG9jayA9IGdldFNnQmxvY0NvbnRlbnQod2l0aG91dEZyb250bWF0dGVyKTtcblx0XHRcdFx0aWYgKHNnQmxvY2spIHtcblx0XHRcdFx0XHRjb25zdCBuZXdQcm9tcHQgPSBuZXcgUHJvbXB0KFxuXHRcdFx0XHRcdFx0c2dCbG9jayxcblx0XHRcdFx0XHRcdGxpbmtUYXJnZXRDb250ZW50LmZpbGVwYXRoLFxuXHRcdFx0XHRcdFx0bGlua1RhcmdldENvbnRlbnQuc2VjdGlvblxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29uc3QgcHJvbXB0UmVzb2x2ZXIgPSBuZXcgUHJvbXB0UmVzb2x2ZXIodGhpcy5hcHAsIG5ld1Byb21wdEhpc3RvcnkpO1xuXHRcdFx0XHRcdHZhcmlhYmxlc1trZXldID0gYXdhaXQgcHJvbXB0UmVzb2x2ZXIucmVzb2x2ZVByb21wdChuZXdQcm9tcHQsIGxpbmtUYXJnZXRDb250ZW50LmZpbGVwYXRoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXJpYWJsZXNba2V5XSA9IHdpdGhvdXRGcm9udG1hdHRlcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBwcm9tcHQucmVtcGxhY2VQbGFjZWhvbGRlcnModmFyaWFibGVzKVxuXHR9XG5cblxuXHRwcml2YXRlIGFzeW5jIGRldGVybWluZVZhcmlhYmxlVmFsdWUobGlua3RleHQ6IGFueSwgbWFpbmZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHtjb250ZW50OiBzdHJpbmcsIGZpbGVwYXRoOiBzdHJpbmcsIHNlY3Rpb246IHN0cmluZyB8IHVuZGVmaW5lZH0gfCB1bmRlZmluZWQ+IHtcblx0XHQvLyBVdGlsaXNlIHBhcnNlTGlua3RleHQgcG91ciBleHRyYWlyZSBjaGVtaW4gZXQgc291cy1jaGVtaW5cblx0XHRjb25zdCB7IHBhdGgsIHN1YnBhdGggfSA9IHRoaXMucGFyc2VMaW5rdGV4dChsaW5rdGV4dCk7XG5cblx0XHQvLyBSXHUwMEU5c291ZHJlIGxlIGNoZW1pbiBkdSBsaWVuXG5cdFx0Y29uc3QgZGVzdEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHBhdGgsIG1haW5maWxlUGF0aCk7XG5cblx0XHRpZiAoIWRlc3RGaWxlKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRlc3RGaWxlLnBhdGgpO1xuXHRcdGlmICghKGxpbmtlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignbm8gaW5zdGFuY2Ugb2YgVEZpbGUnKTtcblx0XHR9XG5cdFx0Ly8gTGlyZSBsZSBjb250ZW51IGR1IGZpY2hpZXIgbGlcdTAwRTlcblx0XHRsZXQgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQobGlua2VkRmlsZSk7XG5cblx0XHQvLyBTaSB1biBzb3VzLWNoZW1pbiBlc3Qgc3BcdTAwRTljaWZpXHUwMEU5LCBleHRyYWlyZSBsYSBzZWN0aW9uIHNwXHUwMEU5Y2lmaXF1ZSBkdSBjb250ZW51XG5cdFx0bGV0IHJlc3VsdDtcblx0XHRpZiAoc3VicGF0aCkge1xuXHRcdFx0cmVzdWx0ID0gdGhpcy5leHRyYWN0U2VjdGlvbkNvbnRlbnQoY29udGVudCwgc3VicGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IGNvbnRlbnQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvbnRlbnQ6IHJlc3VsdCxcblx0XHRcdGZpbGVwYXRoOiBkZXN0RmlsZS5wYXRoLFxuXHRcdFx0c2VjdGlvbjogc3VicGF0aFxuXHRcdH07XG5cdH1cblxuXHRwcml2YXRlIHBhcnNlTGlua3RleHQobGlua3RleHQ6IHN0cmluZyk6IHsgcGF0aDogc3RyaW5nOyBzdWJwYXRoPzogc3RyaW5nIH0ge1xuXHRcdC8vIEljaSwgdHUgZG9pcyBcdTAwRTljcmlyZSBkdSBjb2RlIHBvdXIgYW5hbHlzZXIgbGUgbGllbiBldCBleHRyYWlyZSBsZSBjaGVtaW4gZXQgbGUgc291cy1jaGVtaW5cblx0XHQvLyBDZXR0ZSBmb25jdGlvbiBlc3QgdW4gZXhlbXBsZSBkZSBzdHJ1Y3R1cmUgZXQgZG9pdCBcdTAwRUF0cmUgYWRhcHRcdTAwRTllIFx1MDBFMCB0b24gYmVzb2luXG5cdFx0Y29uc3QgbWF0Y2ggPSBsaW5rdGV4dC5tYXRjaCgvXFxbXFxbKFteXFxdXSs/KSgjKFteI10rPykpP1xcXVxcXS8pO1xuXHRcdGlmIChtYXRjaCkge1xuXHRcdFx0cmV0dXJuIHsgcGF0aDogbWF0Y2hbMV0sIHN1YnBhdGg6IG1hdGNoWzNdIH07XG5cdFx0fVxuXHRcdHJldHVybiB7IHBhdGg6IGxpbmt0ZXh0IH07IC8vIENhcyBwYXIgZFx1MDBFOWZhdXQgc2kgbGUgbGllbiBuJ2VzdCBwYXMgYXUgZm9ybWF0IGF0dGVuZHVcblx0fVxuXG5cdHByaXZhdGUgZXh0cmFjdFNlY3Rpb25Db250ZW50KGNvbnRlbnQ6IHN0cmluZywgc3VicGF0aDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXHRcdGxldCBzZWN0aW9uQ29udGVudCA9ICcnO1xuXHRcdGxldCBpblNlY3Rpb24gPSBmYWxzZTtcblx0XHRsZXQgY3VycmVudExldmVsID0gMDtcblxuXHRcdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdFx0Y29uc3QgaGVhZGVyTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKCMrKVxccysoLiopLyk7XG5cdFx0XHRpZiAoaGVhZGVyTWF0Y2gpIHtcblx0XHRcdFx0Y29uc3QgbGV2ZWwgPSBoZWFkZXJNYXRjaFsxXS5sZW5ndGg7XG5cdFx0XHRcdGNvbnN0IHRpdGxlID0gaGVhZGVyTWF0Y2hbMl0udHJpbSgpO1xuXG5cdFx0XHRcdGlmIChpblNlY3Rpb24gJiYgbGV2ZWwgPD0gY3VycmVudExldmVsKSB7XG5cdFx0XHRcdFx0Ly8gU2kgb24gZXN0IGRcdTAwRTlqXHUwMEUwIGRhbnMgbGEgc2VjdGlvbiBldCBxdSdvbiByZW5jb250cmUgdW4gaGVhZGVyIGRlIG5pdmVhdSBcdTAwRTlnYWwgb3Ugc3VwXHUwMEU5cmlldXIsXG5cdFx0XHRcdFx0Ly8gY2VsYSBzaWduaWZpZSBxdSdvbiBhIGF0dGVpbnQgbGEgZmluIGRlIGxhIHNlY3Rpb24gZCdpbnRcdTAwRTlyXHUwMEVBdC5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh0aXRsZSA9PT0gc3VicGF0aCkge1xuXHRcdFx0XHRcdC8vIFNpIGxlIHRpdHJlIGNvcnJlc3BvbmQgYXUgc3VicGF0aCByZWNoZXJjaFx1MDBFOSxcblx0XHRcdFx0XHQvLyBvbiBjb21tZW5jZSBcdTAwRTAgY2FwdHVyZXIgbGUgY29udGVudSBcdTAwRTAgcGFydGlyIGRlIGNlIHBvaW50LlxuXHRcdFx0XHRcdGluU2VjdGlvbiA9IHRydWU7XG5cdFx0XHRcdFx0Y3VycmVudExldmVsID0gbGV2ZWw7XG5cdFx0XHRcdFx0Y29udGludWU7IC8vIFBhc3NlIFx1MDBFMCBsJ2l0XHUwMEU5cmF0aW9uIHN1aXZhbnRlIHNhbnMgYWpvdXRlciBsZSB0aXRyZSBsdWktbVx1MDBFQW1lIGF1IGNvbnRlbnUuXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGluU2VjdGlvbikge1xuXHRcdFx0XHQvLyBBam91dGUgbGEgbGlnbmUgY291cmFudGUgYXUgY29udGVudSBkZSBsYSBzZWN0aW9uIHNpIG9uIGVzdCBkYW5zIGxhIHNlY3Rpb24gZCdpbnRcdTAwRTlyXHUwMEVBdC5cblx0XHRcdFx0c2VjdGlvbkNvbnRlbnQgKz0gbGluZSArICdcXG4nO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzZWN0aW9uQ29udGVudC50cmltKCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBQTEFDRUhPTERFUl9SRUdFWCB9IGZyb20gXCIuL3Byb21wdFwiO1xuXG50eXBlIFBsYWNlaG9sZGVyTGV2ZWxzID0geyBbcGxhY2Vob2xkZXI6IHN0cmluZ106IG51bWJlciB9O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVsZXZlbE1hcmtkb3duSGVhZGVycyhtYXJrZG93bjogc3RyaW5nLCB0YXJnZXRCYXNlTGV2ZWw6IG51bWJlcik6IHN0cmluZyB7XG5cdGNvbnN0IGxpbmVzID0gbWFya2Rvd24uc3BsaXQoJ1xcbicpO1xuXHRsZXQgYWRqdXN0ZWRNYXJrZG93biA9ICcnO1xuXG5cdC8vIFRyb3V2ZXIgbGUgbml2ZWF1IG1pbmltdW0gYWN0dWVsIGRlcyBoZWFkZXJzIGRhbnMgbGUgbWFya2Rvd25cblx0bGV0IG1pbkN1cnJlbnRMZXZlbCA9IEluZmluaXR5O1xuXHRsaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuXHRcdGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvXigjKykvKTtcblx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdGNvbnN0IGxldmVsID0gbWF0Y2hbMF0ubGVuZ3RoO1xuXHRcdFx0aWYgKGxldmVsIDwgbWluQ3VycmVudExldmVsKSB7XG5cdFx0XHRcdG1pbkN1cnJlbnRMZXZlbCA9IGxldmVsO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0Ly8gQ2FsY3VsZXIgbGUgZFx1MDBFOWNhbGFnZSBuXHUwMEU5Y2Vzc2FpcmUgcG91ciBhanVzdGVyIGxlIG5pdmVhdSBkZXMgaGVhZGVyc1xuXHRjb25zdCBsZXZlbE9mZnNldCA9IHRhcmdldEJhc2VMZXZlbCAtIG1pbkN1cnJlbnRMZXZlbDtcblxuXHRsaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuXHRcdGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvXigjKykoXFxzKy4qKS8pO1xuXHRcdGlmIChtYXRjaCkge1xuXHRcdFx0bGV0IG5ld0xldmVsID0gbWF0Y2hbMV0ubGVuZ3RoICsgbGV2ZWxPZmZzZXQ7XG5cdFx0XHRpZiAobmV3TGV2ZWwgPCAxKSBuZXdMZXZlbCA9IDE7IC8vIEFzc3VyZSBxdWUgbGUgbml2ZWF1IGVzdCBhdSBtb2lucyAxXG5cdFx0XHRpZiAobmV3TGV2ZWwgPiA2KSB7XG5cdFx0XHRcdC8vIFNpIGxlIG5pdmVhdSBkXHUwMEU5cGFzc2UgNiwgY29udmVydGlyIGVuIHRleHRlIGVuIGdyYXMgYXZlYyBudW1cdTAwRTlyb3RhdGlvblxuXHRcdFx0XHRjb25zdCBib2xkVGV4dCA9IGAqKiR7bmV3TGV2ZWwgLSA2fS4gJHttYXRjaFsyXS50cmltKCl9KipgO1xuXHRcdFx0XHRhZGp1c3RlZE1hcmtkb3duICs9IGJvbGRUZXh0ICsgJ1xcbic7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBuZXdIZWFkZXIgPSBgJHsnIycucmVwZWF0KG5ld0xldmVsKX0ke21hdGNoWzJdfWA7XG5cdFx0XHRcdGFkanVzdGVkTWFya2Rvd24gKz0gbmV3SGVhZGVyICsgJ1xcbic7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFkanVzdGVkTWFya2Rvd24gKz0gbGluZSArICdcXG4nO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIGFkanVzdGVkTWFya2Rvd24udHJpbSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVBsYWNlSG9sZGVyc01hcmtkb3duTGV2ZWwobWFya2Rvd246IHN0cmluZyk6IFBsYWNlaG9sZGVyTGV2ZWxzIHtcblx0Y29uc3QgbGluZXMgPSBtYXJrZG93bi5zcGxpdCgnXFxuJyk7XG5cdGxldCBjdXJyZW50TGV2ZWwgPSAwO1xuXHRsZXQgcmVzdWx0OiBQbGFjZWhvbGRlckxldmVscyA9IHt9O1xuXG5cdGxpbmVzLmZvckVhY2gobGluZSA9PiB7XG5cdFx0Ly8gRFx1MDBFOXRlY3RlciBsZXMgbml2ZWF1eCBkZSBoZWFkZXJcblx0XHRjb25zdCBoZWFkZXJNYXRjaCA9IGxpbmUubWF0Y2goL14oIyspLyk7XG5cdFx0aWYgKGhlYWRlck1hdGNoKSB7XG5cdFx0XHRjdXJyZW50TGV2ZWwgPSBoZWFkZXJNYXRjaFswXS5sZW5ndGg7XG5cdFx0fVxuXG5cdFx0Ly8gRFx1MDBFOXRlY3RlciBsZXMgcGxhY2Vob2xkZXJzXG5cdFx0Y29uc3QgcGxhY2Vob2xkZXJNYXRjaGVzID0gWy4uLmxpbmUubWF0Y2hBbGwobmV3IFJlZ0V4cChQTEFDRUhPTERFUl9SRUdFWCwgJ2cnKSldO1xuXHRcdHBsYWNlaG9sZGVyTWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHtcblx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyTmFtZSA9IG1hdGNoWzFdO1xuXHRcdFx0aWYgKHBsYWNlaG9sZGVyTmFtZSAmJiAhKHBsYWNlaG9sZGVyTmFtZSBpbiByZXN1bHQpKSB7XG5cdFx0XHRcdC8vIEFzc2lnbmVyIGxlIG5pdmVhdSBhY3R1ZWwgYXUgcGxhY2Vob2xkZXIgcydpbCBuJ2EgcGFzIGVuY29yZSBcdTAwRTl0XHUwMEU5IHRyb3V2XHUwMEU5XG5cdFx0XHRcdHJlc3VsdFtwbGFjZWhvbGRlck5hbWVdID0gY3VycmVudExldmVsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gUlx1MDBFOWluaXRpYWxpc2VyIGxlIG5pdmVhdSBwb3VyIGxlcyBsaWduZXMgc2FucyBoZWFkZXJcblx0XHRpZiAoIWhlYWRlck1hdGNoICYmICFsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCd7eycpKSB7XG5cdFx0XHRjdXJyZW50TGV2ZWwgPSAwO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIHJlc3VsdDtcbn1cbiIsICJpbXBvcnQgeyBjb21wdXRlUGxhY2VIb2xkZXJzTWFya2Rvd25MZXZlbCwgcmVsZXZlbE1hcmtkb3duSGVhZGVycyB9IGZyb20gXCIuL21hcmtkb3duLWxldmVsZXJcIjtcblxuZXhwb3J0IGNvbnN0IFBMQUNFSE9MREVSX1JFR0VYID0gJ1xcXFx7XFxcXHsoW1xcXFx3LV0rKVxcXFx9XFxcXH0nO1xuXG5leHBvcnQgY2xhc3MgUHJvbXB0IHtcblx0Y29uc3RydWN0b3IoXG5cdFx0cHVibGljIHJlYWRvbmx5IHRlbXBsYXRlOiBzdHJpbmcsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBmaWxlcGF0aDogc3RyaW5nLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgc2VjdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG5cdCkge31cblxuXHRwdWJsaWMgcmVtcGxhY2VQbGFjZWhvbGRlcnModmFyaWFibGVzOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfSk6IHN0cmluZyB7XG5cdFx0Y29uc3QgcGxhY2Vob2xkZXJzTGV2ZWxzID0gY29tcHV0ZVBsYWNlSG9sZGVyc01hcmtkb3duTGV2ZWwodGhpcy50ZW1wbGF0ZSk7XG5cdFx0cmV0dXJuIHRoaXMudGVtcGxhdGUucmVwbGFjZShuZXcgUmVnRXhwKFBMQUNFSE9MREVSX1JFR0VYLCAnZycpLCAobWF0Y2gsIHZhcmlhYmxlTmFtZSkgPT4ge1xuXHRcdFx0aWYgKHZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eSh2YXJpYWJsZU5hbWUpKSB7XG5cdFx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyTGV2ZWwgPSBwbGFjZWhvbGRlcnNMZXZlbHNbdmFyaWFibGVOYW1lXTtcblx0XHRcdFx0Y29uc3QgbWFya2Rvd24gPSB2YXJpYWJsZXNbdmFyaWFibGVOYW1lXTtcblx0XHRcdFx0cmV0dXJuIHJlbGV2ZWxNYXJrZG93bkhlYWRlcnMobWFya2Rvd24sIHBsYWNlaG9sZGVyTGV2ZWwgKyAxKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBpc0VxdWFsKG90aGVyOiBQcm9tcHQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5maWxlcGF0aCA9PT0gb3RoZXIuZmlsZXBhdGggJiYgdGhpcy5zZWN0aW9uID09PSBvdGhlci5zZWN0aW9uO1xuXHR9XG5cblx0cHVibGljIGdldFByb21wdElkKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICEhdGhpcy5zZWN0aW9uID8gYCR7dGhpcy5maWxlcGF0aH0jJHt0aGlzLnNlY3Rpb259YCA6IHRoaXMuZmlsZXBhdGg7XG5cdH1cblxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBnZXRWYXJpYWJsZXMoY29udGVudDogc3RyaW5nKTogU2V0PHN0cmluZz4ge1xuXHRjb25zdCByZWdleCA9IC97eyhbXFx3LV0rKX19L2c7IC8vIE1vZGlmaVx1MDBFOSBwb3VyIGluY2x1cmUgZGVzIHRpcmV0cyBkYW5zIGxlcyBub21zIGRlIHZhcmlhYmxlc1xuXHRsZXQgbWF0Y2g7XG5cdGNvbnN0IHZhcmlhYmxlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG5cdHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuXHRcdHZhcmlhYmxlcy5hZGQobWF0Y2hbMV0pO1xuXHR9XG5cdHJldHVybiB2YXJpYWJsZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZ0Jsb2NDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG5cdC8vIE1vZGlmaWNhdGlvbiBkZSBsJ2V4cHJlc3Npb24gclx1MDBFOWd1bGlcdTAwRThyZSBwb3VyIGlnbm9yZXIgbGVzIGVzcGFjZXMgYXZhbnQgZXQgYXByXHUwMEU4cyBsZSBibG9jIGBzZ2Bcblx0Y29uc3QgcmVnZXggPSAvXlxccypgYGBzZ1xcbihbXFxzXFxTXSo/KVxcbmBgYFxccyokLztcblx0Y29uc3QgY29ycmVzcG9uZGFuY2UgPSBjb250ZW50Lm1hdGNoKHJlZ2V4KTtcblx0aWYgKGNvcnJlc3BvbmRhbmNlKSB7XG5cdFx0cmV0dXJuIGNvcnJlc3BvbmRhbmNlWzFdLnRyaW0oKTsgLy8gUmV0b3VybmUgbGUgY29udGVudSBkdSBibG9jIHNnLCBlbiByZXRpcmFudCBsZXMgZXNwYWNlcyBkZSBkXHUwMEU5YnV0IGV0IGRlIGZpblxuXHR9XG5cdHJldHVybiB1bmRlZmluZWQ7IC8vIFJldG91cm5lIHVuZGVmaW5lZCBzaSBsZSB0ZXh0ZSBuJ2VzdCBwYXMgdW4gYmxvYyBzZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRnJvbnRtYXR0ZXIoY29udGVudDogc3RyaW5nKSB7XG5cdC8vIENldHRlIGV4cHJlc3Npb24gclx1MDBFOWd1bGlcdTAwRThyZSBjaGVyY2hlIGxlcyBwYXJ0aWVzIGVuY2Fkclx1MDBFOWVzIHBhciBcIi0tLVwiIGF1IGRcdTAwRTlidXQgZHUgdGV4dGVcblx0Y29uc3QgcmVnZXggPSAvXi0tLVtcXHNcXFNdKz8tLS1cXG4/Lztcblx0Ly8gUmVtcGxhY2UgbGUgZnJvbnRtYXR0ZXIgcGFyIHVuZSBjaGFcdTAwRUVuZSB2aWRlIHMnaWwgZXN0IHRyb3V2XHUwMEU5XG5cdHJldHVybiBjb250ZW50LnJlcGxhY2UocmVnZXgsICcnKTtcbn1cblxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIENvcHlQcm9tcHRNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cHJvbXB0OiBzdHJpbmc7XG5cdG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHByb21wdDogc3RyaW5nLCBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG5cdFx0dGhpcy5wcm9tcHQgPSBwcm9tcHQ7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiUHJvbXB0XCIgfSk7XG5cblx0XHRjb25zdCB0ZXh0YXJlYSA9IGNvbnRlbnRFbC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdFx0c3R5bGU6IFwid2lkdGg6IDEwMCU7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IG1hcmdpbi1ib3R0b206IDIwcHg7XCIgLy8gQXNzdXJlIHF1ZSBsZSB0ZXh0YXJlYSBwcmVuZCB0b3V0ZSBsYSBsYXJnZXVyIGV0IGFqb3V0ZSB1biBwZXUgZCdlc3BhY2UgZW4gZGVzc291c1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRleHRhcmVhLnZhbHVlID0gdGhpcy5wcm9tcHQ7XG5cdFx0dGV4dGFyZWEucm93cyA9IDEwO1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdFx0c3R5bGU6IFwidGV4dC1hbGlnbjogcmlnaHQ7XCIgLy8gQWxpZ25lbWVudCBkdSBib3V0b24gXHUwMEUwIGRyb2l0ZVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgYnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTdWJtaXRcIiB9KTtcblx0XHRidXR0b24uYWRkQ2xhc3MoXCJtb2QtY3RhXCIpO1xuXHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0dGhpcy5vblN1Ym1pdCh0ZXh0YXJlYS52YWx1ZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUF1Qjs7O0FDQXZCLElBQUFDLG1CQUFxRDs7O0FDQXJELHNCQUEyQjs7O0FDSXBCLFNBQVMsdUJBQXVCLFVBQWtCLGlCQUFpQztBQUN6RixRQUFNLFFBQVEsU0FBUyxNQUFNLElBQUk7QUFDakMsTUFBSSxtQkFBbUI7QUFHdkIsTUFBSSxrQkFBa0I7QUFDdEIsUUFBTSxRQUFRLFVBQVE7QUFDckIsVUFBTSxRQUFRLEtBQUssTUFBTSxPQUFPO0FBQ2hDLFFBQUksT0FBTztBQUNWLFlBQU0sUUFBUSxNQUFNLENBQUMsRUFBRTtBQUN2QixVQUFJLFFBQVEsaUJBQWlCO0FBQzVCLDBCQUFrQjtBQUFBLE1BQ25CO0FBQUEsSUFDRDtBQUFBLEVBQ0QsQ0FBQztBQUdELFFBQU0sY0FBYyxrQkFBa0I7QUFFdEMsUUFBTSxRQUFRLFVBQVE7QUFDckIsVUFBTSxRQUFRLEtBQUssTUFBTSxjQUFjO0FBQ3ZDLFFBQUksT0FBTztBQUNWLFVBQUksV0FBVyxNQUFNLENBQUMsRUFBRSxTQUFTO0FBQ2pDLFVBQUksV0FBVztBQUFHLG1CQUFXO0FBQzdCLFVBQUksV0FBVyxHQUFHO0FBRWpCLGNBQU0sV0FBVyxLQUFLLFdBQVcsTUFBTSxNQUFNLENBQUMsRUFBRSxL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
